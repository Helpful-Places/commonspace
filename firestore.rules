service cloud.firestore {
  match /databases/{database}/documents {
    match /study/{studyId} {
        allow read, write: if request.auth != null;
    }

    match /study/{studyId}/survey/{surveyId} {
          allow read, write: if request.auth != null;
    }

    match /study/{studyId}/location/{locationId} {
          allow read, write: if request.auth != null;
    }

    match /study/{studyId}/survey/{document=**} {
          allow read: if request.auth != null;
          allow write: if request.auth != null
                          && studyId != '5adccbed-1892-4473-9a2d-2e75436da566'
                          && studyId != '475670c0-c93a-48a0-89de-1389939ec343';
    }
    
    match /users/{userId} {
      allow read, write: if request.auth != null;
    }
  }
}